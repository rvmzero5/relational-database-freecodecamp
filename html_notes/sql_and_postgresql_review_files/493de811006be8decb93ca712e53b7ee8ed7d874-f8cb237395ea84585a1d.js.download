"use strict";(self.webpackChunk_freecodecamp_client=self.webpackChunk_freecodecamp_client||[]).push([[3028],{14649:function(e,n,s){var a=s(46437),t=s(14848),l=s(75292),o=s(8956);function r(e){let{explanation:n}=e;const{t:s}=(0,t.Bd)();return a.createElement(a.Fragment,null,a.createElement("details",null,a.createElement("summary",{className:"challenge-summary"},s("learn.explanation")),a.createElement(l.hK,{size:"m"}),a.createElement(o.A,{className:"line-numbers",text:n})),a.createElement(l.hK,{size:"m"}))}r.displayName="ChallengeExplanation",n.A=r},98526:function(e,n,s){var a=s(46437),t=s(14848),l=s(8038);function o(e){let{heading:n,isCompleted:s=!1}=e;const{t:o}=(0,t.Bd)();return a.createElement("div",{className:"challenge-heading-wrap"},a.createElement("h2",{className:"challenge-heading"},o(n)),s&&a.createElement(l.A,null))}o.displayName="ChallengeHeading",n.A=o},80664:function(e,n,s){s(94814);var a=s(46437),t=s(14848),l=s(75292),o=s(36647),r=s.n(o),c=s(8956);function u(e){let{transcript:n,shouldPersistExpanded:s,isDialogue:o}=e;const{t:u}=(0,t.Bd)(),[p,m]=(0,a.useState)((()=>{var e;return!!s&&(null!==(e=r().get("fcc-transcript-expanded"))&&void 0!==e&&e)}));return a.createElement(a.Fragment,null,a.createElement("details",{"data-testid":"challenge-transcript",open:p},a.createElement("summary",{onClick:function(e){e.preventDefault(),s&&r().set("fcc-transcript-expanded",!p),m(!p)},"aria-expanded":p,className:"challenge-transcript-heading"},u("learn.transcript")),a.createElement(l.hK,{size:"m"}),o?a.createElement("table",{className:"transcript-table"},a.createElement("tbody",null,n.split("\n").filter((e=>""!==e.trim())).map(((e,n)=>a.createElement("tr",{key:n},a.createElement("td",{dangerouslySetInnerHTML:{__html:e}})))))):a.createElement(c.A,{className:"line-numbers",text:n})),a.createElement(l.hK,{size:"m"}))}u.displayName="ChallengeTranscript",n.A=u},60879:function(e,n,s){s(94814);var a=s(46437),t=s(14848),l=s(1725),o=s(20213),r=s(75292),c=s(20186),u=s(7572),p=s(18093),m=s(30279),i=s(85982);const{forumLocation:g}=u,h=g+"/t/19514",$=(e,n,s)=>{const a=(0,c.t)(`intro:${s}.blocks.${n}.title`),t=encodeURIComponent(`${a} - ${e} in:title`);return`${g}/search?q=${t}`};function d(e){let{name:n,i18nKey:s,onChange:l,value:o,href:r,label:c}=e;const{t:u}=(0,t.Bd)();return a.createElement("div",{className:"checkbox-container"},a.createElement("input",{id:n,name:n,type:"checkbox",onChange:l,checked:o,required:!0,"aria-label":u(c)}),a.createElement("span",null,a.createElement(t.x6,{i18nKey:s},a.createElement("a",{href:r,rel:"noopener noreferrer",target:"_blank"},"placeholder",a.createElement("span",{className:"sr-only"},u("aria.opens-new-window"))))))}function b(e){let{closeHelpModal:n,createQuestion:s,isOpen:l,challengeBlock:o,superBlock:c,challengeTitle:u}=e;const{t:p}=(0,t.Bd)(),[m,g]=(0,a.useState)(!1),[b,y]=(0,a.useState)(""),[f,E]=(0,a.useState)(!1),[w,C]=(0,a.useState)(!1),O=(0,a.useRef)(null);(0,a.useEffect)((()=>{var e,n;m&&(null===(e=O.current)||void 0===e||null===(n=e.querySelector("input"))||void 0===n||n.focus())}),[m]);const v=(0,a.useMemo)((()=>b.length>=50&&f&&w),[b,f,w]),k=()=>{y(""),E(!1),C(!1)},x=()=>{n(),g(!1),k()};return l&&(0,i.A)({event:"pageview",pagePath:"/help-modal"}),a.createElement(r.aF,{onClose:x,open:!!l},a.createElement(r.aF.Header,{closeButtonClassNames:"close"},p("buttons.ask-for-help")),a.createElement(r.aF.Body,null,m?a.createElement("form",{onSubmit:e=>{e.preventDefault(),v&&(g(!1),k(),s(b),n())},ref:O},a.createElement("fieldset",null,a.createElement("legend",{className:"help-form-legend"},p("learn.must-confirm-statements")),a.createElement(d,{name:"read-search-ask-checkbox",i18nKey:"learn.read-search-ask-checkbox",label:"aria.rsa-checkbox",onChange:e=>E(e.target.checked),value:f,href:h}),a.createElement(r.hK,{size:"xs"}),a.createElement(d,{name:"similar-questions-checkbox",i18nKey:"learn.similar-questions-checkbox",label:"aria.similar-questions-checkbox",onChange:e=>C(e.target.checked),value:w,href:$(u,o,c)})),a.createElement(r.hK,{size:"s"}),a.createElement("label",{htmlFor:"help-modal-form-description"},p("forum-help.whats-happening"),a.createElement("span",{className:"sr-only"},p("learn.min-50-max-500"))),a.createElement(r.MJ,{id:"help-modal-form-description",name:"description",onChange:e=>{y(e.target.value)},componentClass:"textarea",rows:5,value:b,placeholder:p("forum-help.describe"),minLength:50,maxLength:500,required:!0}),a.createElement(r.hK,{size:"s"}),b.length<50?a.createElement("p",null,p("learn.minimum-characters",{characters:50-b.length})):a.createElement("p",null,p("learn.characters-left",{characters:500-b.length})),a.createElement(r.hK,{size:"xxs"}),a.createElement(r.$n,{block:!0,size:"large",variant:"primary",type:"submit",disabled:!v},p("buttons.submit")),a.createElement(r.hK,{size:"xxs"}),a.createElement(r.$n,{block:!0,size:"large",variant:"primary",onClick:x},p("buttons.cancel"))):a.createElement(a.Fragment,null,a.createElement("div",{className:"help-text-warning"},a.createElement("p",null,a.createElement(t.x6,{i18nKey:"learn.tried-rsa"},a.createElement("a",{href:h,rel:"noopener noreferrer",target:"_blank"},"placeholder"))),a.createElement("p",null,a.createElement(t.x6,{i18nKey:"learn.rsa-forum"},a.createElement("a",{href:$(u,o,c),rel:"noopener noreferrer",target:"_blank"},"placeholder"),"placeholder"))),a.createElement(r.$n,{block:!0,size:"large",variant:"primary",onClick:()=>g(!0)},p("buttons.create-post")),a.createElement(r.hK,{size:"xxs"}),a.createElement(r.$n,{block:!0,size:"large",variant:"primary",onClick:n},p("buttons.cancel")))))}b.displayName="HelpModal",n.A=(0,l.Ng)((e=>({isOpen:(0,m.si)(e)})),(e=>(0,o.zH)({createQuestion:p.hG,closeHelpModal:()=>(0,p.Oo)("help")},e)))(b)},67670:function(e,n,s){s.d(n,{j:function(){return a}});class a{#e;constructor(){this.#e=[]}attach(e){this.#e.push(e)}detach(e){this.#e=this.#e.filter((n=>n!==e))}notify(e){this.#e.forEach((n=>n(e)))}}},63631:function(e,n,s){s.d(n,{A:function(){return ae}});var a=s(20291),t=(s(94814),s(46437)),l=s(75292),o=s(79398),r=s(54234),c=s(14848),u=s(89673);function p(e){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",fill:e.fill||"var(--gray-00)"},t.createElement("path",{d:"M0 96C0 60.7 28.7 32 64 32l448 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM200 208c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48s21.5-48 48-48zm144 48c0-26.5 21.5-48 48-48c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48z"}))}p.displayName="ClosedCaptionsIcon";var m=p,i=s(80664);const g="https://cdn.freecodecamp.org/curriculum/english/animation-assets",h=`${g}/sounds`,$=`${g}/images`,d=`${$}/backgrounds`,b=`${$}/characters`,y=`${b}/alice`,f=`${b}/anna`,E=`${b}/bob`,w=`${b}/brian`,C=`${b}/david`,O=`${b}/jake`,v=`${b}/james`,k=`${b}/linda`,x=`${b}/lisa`,T=`${b}/maria`,N=`${b}/npc`,M=`${b}/sarah`,z=`${b}/sophie`,S=`${b}/tom`,j=`${b}/angela`,A=`${b}/camila`,K=`${b}/elena`,L=`${b}/esteban`,B=`${b}/julieta`,H=`${b}/luna`,R=`${b}/mateo`,F=`${b}/sebastian`,_=`${b}/chen-na`,q=`${b}/li-hong`,D=`${b}/li-ping`,I=`${b}/lin-yating`,J=`${b}/liu-ming`,W=`${b}/wang-hua`,P=`${b}/zhang-wei`,Y=`${b}/zhou-yongjie`,G={alice:{base:`${y}/base.png`,brows:`${y}/brows-neutral.png`,eyesClosed:`${y}/eyes-closed.png`,eyesOpen:`${y}/eyes-open.png`,glasses:null,mouthClosed:`${y}/mouth-smile.png`,mouthOpen:`${y}/mouth-laugh.png`},anna:{base:`${f}/base.png`,brows:`${f}/brows-normal.png`,eyesClosed:`${f}/eyes-closed.png`,eyesOpen:`${f}/eyes-open.png`,glasses:null,mouthClosed:`${f}/mouth-smile.png`,mouthOpen:`${f}/mouth-laugh.png`},bob:{base:`${E}/base.png`,brows:`${E}/brows-neutral.png`,eyesClosed:`${E}/eyes-closed.png`,eyesOpen:`${E}/eyes-open.png`,glasses:null,mouthClosed:`${E}/mouth-smile.png`,mouthOpen:`${E}/mouth-laugh.png`},brian:{base:`${w}/base.png`,brows:`${w}/brows-neutral.png`,eyesClosed:`${w}/eyes-closed.png`,eyesOpen:`${w}/eyes-open.png`,glasses:`${w}/glasses.png`,mouthClosed:`${w}/mouth-smile.png`,mouthOpen:`${w}/mouth-laugh.png`},david:{base:`${C}/base.png`,brows:`${C}/brows-neutral.png`,eyesClosed:`${C}/eyes-closed.png`,eyesOpen:`${C}/eyes-open.png`,glasses:null,mouthClosed:`${C}/mouth-smile.png`,mouthOpen:`${C}/mouth-laugh.png`},jake:{base:`${O}/base.png`,brows:`${O}/brows.png`,eyesClosed:`${O}/eyes-closed.png`,eyesOpen:`${O}/eyes-open.png`,glasses:null,mouthClosed:`${O}/mouth-smile.png`,mouthOpen:`${O}/mouth-laugh.png`},james:{base:`${v}/base.png`,brows:`${v}/brows-neutral.png`,eyesClosed:`${v}/eyes-closed.png`,eyesOpen:`${v}/eyes-open.png`,glasses:`${v}/glasses.png`,mouthClosed:`${v}/mouth-smile.png`,mouthOpen:`${v}/mouth-laugh.png`},linda:{base:`${k}/base.png`,brows:`${k}/brows-neutral.png`,eyesClosed:`${k}/eyes-closed.png`,eyesOpen:`${k}/eyes-open.png`,glasses:null,mouthClosed:`${k}/mouth-smile.png`,mouthOpen:`${k}/mouth-laugh.png`},lisa:{base:`${x}/base.png`,brows:`${x}/brows-neutral.png`,eyesClosed:`${x}/eyes-closed.png`,eyesOpen:`${x}/eyes-open.png`,glasses:null,mouthClosed:`${x}/mouth-smile.png`,mouthOpen:`${x}/mouth-laugh.png`},maria:{base:`${T}/base.png`,brows:`${T}/brows-normal.png`,eyesClosed:`${T}/eyes-closed.png`,eyesOpen:`${T}/eyes-open.png`,glasses:`${T}/glasses.png`,mouthClosed:`${T}/mouth-smile.png`,mouthOpen:`${T}/mouth-laugh.png`},npcBoy:{base:`${N}/boy-base.png`,brows:`${N}/boy-base.png`,eyesClosed:`${N}/boy-eyes-closed.png`,eyesOpen:`${N}/boy-eyes-open.png`,glasses:null,mouthClosed:`${N}/boy-mouth-smile.png`,mouthOpen:`${N}/boy-mouth-laugh.png`},npcGirl:{base:`${N}/girl-base.png`,brows:`${N}/girl-base.png`,eyesClosed:`${N}/girl-eyes-closed.png`,eyesOpen:`${N}/girl-eyes-open.png`,glasses:null,mouthClosed:`${N}/girl-mouth-smile.png`,mouthOpen:`${N}/girl-mouth-laugh.png`},npcMan:{base:`${N}/man-base.png`,brows:`${N}/man-base.png`,eyesClosed:`${N}/man-eyes-closed.png`,eyesOpen:`${N}/man-eyes-open.png`,glasses:null,mouthClosed:`${N}/man-mouth-smile.png`,mouthOpen:`${N}/man-mouth-laugh.png`},npcWoman:{base:`${N}/woman-base.png`,brows:`${N}/woman-base.png`,eyesClosed:`${N}/woman-eyes-closed.png`,eyesOpen:`${N}/woman-eyes-open.png`,glasses:null,mouthClosed:`${N}/woman-mouth-smile.png`,mouthOpen:`${N}/woman-mouth-laugh.png`},sarah:{base:`${M}/base.png`,brows:`${M}/brows-normal.png`,eyesClosed:`${M}/eyes-closed.png`,eyesOpen:`${M}/eyes-open.png`,glasses:null,mouthClosed:`${M}/mouth-smile.png`,mouthOpen:`${M}/mouth-laugh.png`},sophie:{base:`${z}/base.png`,brows:`${z}/brows-neutral.png`,eyesClosed:`${z}/eyes-closed.png`,eyesOpen:`${z}/eyes-open.png`,glasses:`${z}/glasses.png`,mouthClosed:`${z}/mouth-smile.png`,mouthOpen:`${z}/mouth-laugh.png`},tom:{base:`${S}/base.png`,brows:`${S}/brows-normal.png`,eyesClosed:`${S}/eyes-closed.png`,eyesOpen:`${S}/eyes-open.png`,glasses:null,mouthClosed:`${S}/mouth-smile.png`,mouthOpen:`${S}/mouth-laugh.png`},angela:{base:`${j}/base.png`,brows:`${j}/brows-neutral.png`,eyesClosed:`${j}/eyes-closed.png`,eyesOpen:`${j}/eyes-open.png`,glasses:null,mouthClosed:`${j}/mouth-smile.png`,mouthOpen:`${j}/mouth-open.png`},camila:{base:`${A}/base.png`,brows:`${A}/brows-neutral.png`,eyesClosed:`${A}/eyes-closed.png`,eyesOpen:`${A}/eyes-open.png`,glasses:null,mouthClosed:`${A}/mouth-smile.png`,mouthOpen:`${A}/mouth-open.png`},elena:{base:`${K}/base.png`,brows:`${K}/brows-neutral.png`,eyesClosed:`${K}/eyes-closed.png`,eyesOpen:`${K}/eyes-open.png`,glasses:null,mouthClosed:`${K}/mouth-smile.png`,mouthOpen:`${K}/mouth-open.png`},esteban:{base:`${L}/base.png`,brows:`${L}/brows-neutral.png`,eyesClosed:`${L}/eyes-closed.png`,eyesOpen:`${L}/eyes-open.png`,glasses:null,mouthClosed:`${L}/mouth-smile.png`,mouthOpen:`${L}/mouth-open.png`},julieta:{base:`${B}/base.png`,brows:`${B}/brows-neutral.png`,eyesClosed:`${B}/eyes-closed.png`,eyesOpen:`${B}/eyes-open.png`,glasses:null,mouthClosed:`${B}/mouth-smile.png`,mouthOpen:`${B}/mouth-open.png`},luna:{base:`${H}/base.png`,brows:`${H}/brows-neutral.png`,eyesClosed:`${H}/eyes-closed.png`,eyesOpen:`${H}/eyes-open.png`,glasses:null,mouthClosed:`${H}/mouth-smile.png`,mouthOpen:`${H}/mouth-open.png`},mateo:{base:`${R}/base.png`,brows:`${R}/brows-neutral.png`,eyesClosed:`${R}/eyes-closed.png`,eyesOpen:`${R}/eyes-open.png`,glasses:null,mouthClosed:`${R}/mouth-smile.png`,mouthOpen:`${R}/mouth-open.png`},sebastian:{base:`${F}/base.png`,brows:`${F}/brows-neutral.png`,eyesClosed:`${F}/eyes-closed.png`,eyesOpen:`${F}/eyes-open.png`,glasses:null,mouthClosed:`${F}/mouth-smile.png`,mouthOpen:`${F}/mouth-open.png`},chenNa:{base:`${_}/base.png`,brows:`${_}/brows-neutral.png`,eyesClosed:`${_}/eyes-closed.png`,eyesOpen:`${_}/eyes-open.png`,glasses:null,mouthClosed:`${_}/mouth-smile.png`,mouthOpen:`${_}/mouth-open.png`},liHong:{base:`${q}/base.png`,brows:`${q}/brows-neutral.png`,eyesClosed:`${q}/eyes-closed.png`,eyesOpen:`${q}/eyes-open.png`,glasses:null,mouthClosed:`${q}/mouth-smile.png`,mouthOpen:`${q}/mouth-open.png`},liPing:{base:`${D}/base.png`,brows:`${D}/brows-neutral.png`,eyesClosed:`${D}/eyes-closed.png`,eyesOpen:`${D}/eyes-open.png`,glasses:null,mouthClosed:`${D}/mouth-smile.png`,mouthOpen:`${D}/mouth-open.png`},linYating:{base:`${I}/base.png`,brows:`${I}/brows-neutral.png`,eyesClosed:`${I}/eyes-closed.png`,eyesOpen:`${I}/eyes-open.png`,glasses:null,mouthClosed:`${I}/mouth-smile.png`,mouthOpen:`${I}/mouth-open.png`},liuMing:{base:`${J}/base.png`,brows:`${J}/brows-neutral.png`,eyesClosed:`${J}/eyes-closed.png`,eyesOpen:`${J}/eyes-open.png`,glasses:null,mouthClosed:`${J}/mouth-smile.png`,mouthOpen:`${J}/mouth-open.png`},wangHua:{base:`${W}/base.png`,brows:`${W}/brows-neutral.png`,eyesClosed:`${W}/eyes-closed.png`,eyesOpen:`${W}/eyes-open.png`,glasses:null,mouthClosed:`${W}/mouth-smile.png`,mouthOpen:`${W}/mouth-open.png`},zhangWei:{base:`${P}/base.png`,brows:`${P}/brows-neutral.png`,eyesClosed:`${P}/eyes-closed.png`,eyesOpen:`${P}/eyes-open.png`,glasses:null,mouthClosed:`${P}/mouth-smile.png`,mouthOpen:`${P}/mouth-open.png`},zhouYongjie:{base:`${Y}/base.png`,brows:`${Y}/brows-neutral.png`,eyesClosed:`${Y}/eyes-closed.png`,eyesOpen:`${Y}/eyes-open.png`,glasses:null,mouthClosed:`${Y}/mouth-smile.png`,mouthOpen:`${Y}/mouth-open.png`}},Q={Alice:G.alice,Amy:G.npcGirl,Anna:G.anna,Bob:G.bob,Brian:G.brian,Candidate:G.npcBoy,David:G.david,"Delivery Man":G.npcMan,Expert:G.npcMan,Jake:G.jake,James:G.james,Jessica:G.npcWoman,Jim:G.npcMan,Josh:G.npcMan,Linda:G.linda,Lisa:G.lisa,Maria:G.maria,Mark:G.npcBoy,Riker:G.npcMan,Sarah:G.sarah,"Second Candidate":G.npcMan,Sophie:G.sophie,Tom:G.tom,Alex:G.npcGirl,"Ángela":G.angela,Camila:G.camila,Carlos:G.brian,Elena:G.elena,Esteban:G.esteban,"Joaquín":G.jake,Julieta:G.julieta,Luis:G.bob,Luna:G.luna,Marisol:G.linda,Mateo:G.mateo,Noelia:G.npcWoman,"René":G.npcMan,"Sebastián":G.sebastian,Diego:G.tom,Valeria:G.alice,"Chen Na":G.chenNa,"Li Hong":G.liHong,"Li Ping":G.liPing,"Lin Yating":G.linYating,"Liu Ming":G.liuMing,"Wang Hua":G.wangHua,"Zhang Wei":G.zhangWei,"Zhou Yongjie":G.zhouYongjie};function Z(e,n){return Math.floor(Math.random()*(n-e+1))+e}function U(e){let{position:n,opacity:s,name:a,isTalking:l,sceneSubject:o}=e;const[r,c]=(0,t.useState)(!0),[u,p]=(0,t.useState)(!1),[m,i]=(0,t.useState)(!1),g=e=>{i("play"===e)};(0,t.useEffect)((()=>(o.attach(g),()=>{o.detach(g)})),[o]),(0,t.useEffect)((()=>{if(!m)return;let e;const n=Z(2e3,5e3),s=setInterval((()=>{const n=Z(0,1e3);e=setTimeout((()=>{c(!1),e=setTimeout((()=>{c(!0)}),30)}),n)}),n);return()=>{c(!0),clearInterval(s),clearTimeout(e)}}),[m]),(0,t.useEffect)((()=>{if(!m)return;let e,n,s;if(l){const a=()=>{const e=Z(0,100),a=Z(150,300);n=setTimeout((()=>{p(!0)}),e),s=setTimeout((()=>{p(!1)}),a)};a(),e=setInterval((()=>{a()}),300)}return()=>{p(!1),clearInterval(e),clearTimeout(n),clearTimeout(s)}}),[l,m]);const h={opacity:s};n.x&&(h.left=`${n.x}%`),n.y&&(h.top=`${n.y}%`);const $={transform:n.z?`translate(-${50*n.z}%) scale(${n.z})`:"translate(-50%)"},{base:d,brows:b,eyesOpen:y,eyesClosed:f,mouthOpen:E,mouthClosed:w,glasses:C}=Q[a];return t.createElement("div",{style:h,className:"character-wrap"},t.createElement("img",{style:$,className:"character-feature",src:d,alt:""}),t.createElement("img",{style:$,className:"character-feature",src:b,alt:""}),t.createElement("img",{style:$,className:"character-feature",src:r?y:f,alt:""}),t.createElement("img",{style:$,className:"character-feature",src:u?E:w,alt:""}),C&&t.createElement("img",{style:$,className:"character-feature",src:C,alt:""}))}U.displayName="Character";var V=U;const X=e=>1e3*e,ee=e=>{e&&((new Image).src=e)},ne={label:"",text:"",align:"left"};function se(e){let{scene:n,sceneSubject:s}=e;const{t:p}=(0,c.Bd)(),g=(0,t.useRef)(!1),{setup:$,commands:b}=n,{audio:y,alwaysShowDialogue:f}=$,E=(0,t.useRef)(new Audio),w=null!==y.startTimestamp&&null!==y.finishTimestamp?X(y.finishTimestamp-y.startTimestamp):1/0,C=()=>{g.current&&E.current.pause(),g.current=!1,clearTimeout(q.current),clearTimeout(D.current)},O=()=>{N(!1),window.cancelAnimationFrame(I.current)},v=(0,t.useCallback)((()=>{C(),E.current.currentTime=y.startTimestamp||0,_.current=0}),[y.startTimestamp]);(0,t.useEffect)((()=>{const{current:e}=E,{audio:n}=$;if(e){const s=w!==1/0?`#t=${n.startTimestamp}`:"";e.volume=1,e.addEventListener("canplaythrough",U),e.src=`${h}/${n.filename}${s}`,e.preload="auto",e.load()}return ee(`${d}/${$.background}`),$.characters.map((e=>{let{character:n}=e;return Object.values(Q[n])})).flat().forEach(ee),b.map((e=>{let{background:n}=e;return n?`${d}/${n}`:null})).forEach(ee),()=>{v(),e.removeEventListener("canplaythrough",U)}}),[w,$,b,v]);const k=$.background,x=(0,t.useMemo)((()=>$.characters.map((e=>{var n;return{...e,opacity:null!==(n=e.opacity)&&void 0!==n?n:1,isTalking:!1}}))),[$.characters]),[T,N]=(0,t.useState)(!1),[M,z]=(0,t.useState)(!1),[S,j]=(0,t.useState)(!1),[A,K]=(0,t.useState)(x),[L,B]=(0,t.useState)(ne),[H,R]=(0,t.useState)(k),F=(0,t.useRef)(0),_=(0,t.useRef)(0),q=(0,t.useRef)(),D=(0,t.useRef)(),I=(0,t.useRef)(),J=(0,t.useRef)(new Set),[W,P]=(0,t.useState)(0),Y=(0,t.useRef)(!1),G=(0,t.useMemo)((()=>{const e=b.flatMap((e=>{const{startTime:n,finishTime:s,...a}=e,t={...a,time:X(n),isTalking:!!a.dialogue},l=s?{...a,time:X(s),isTalking:!1}:null;return l?[t,l]:[t]}));return e.sort(((e,n)=>e.time-n.time)),e}),[b]),Z=G.at(-1).time+500,U=()=>{z(!0)},se=(0,t.useCallback)((()=>{const e=_.current,n=()=>{const e=Date.now()-F.current;P(e),Y.current&&(I.current=window.requestAnimationFrame(n))};if(T||!M)return;N(!0),Y.current=!0,F.current=Date.now()-e,n();const s=X(y.startTime)-e;q.current=setTimeout((()=>{E.current.paused&&E.current.play().then((()=>{g.current=!0;const e=(w===1/0?X(E.current.duration):w)+Math.min(0,s);e<0?v():D.current=setTimeout((()=>{const e=X(y.finishTimestamp)-X(E.current.currentTime);e<100?v():D.current=setTimeout((()=>{v()}),e)}),e)}))}),s)}),[y,w,T,v,M]),ae=(0,t.useCallback)((()=>{Y.current=!1,_.current=W,C(),O()}),[W]),te=(0,t.useCallback)((()=>{J.current.clear(),C(),O(),E.current.currentTime=y.startTimestamp||0,P(0),N(!1),Y.current=!1,B(ne),K(x),R(k)}),[y,x,k]),le=(0,t.useCallback)((()=>{J.current.clear(),F.current=0,P(0),B(ne),K(x),R(k)}),[x,k]),oe=(0,t.useCallback)((e=>{"play"===e?se():"pause"===e?ae():te()}),[se,ae,te]);(0,t.useEffect)((()=>(s.attach(oe),()=>{s.detach(oe)})),[oe,s]),(0,t.useEffect)((()=>{(0,a.A)(G)||(G.forEach(((e,n)=>{W>e.time&&!J.current.has(n)&&(J.current.add(n),e.background&&R(e.background),B(e.dialogue?{...e.dialogue,label:e.character}:ne),K((n=>{const s=n.map((n=>{var s,a;return n.character===e.character?{...n,position:null!==(s=e.position)&&void 0!==s?s:n.position,opacity:null!==(a=e.opacity)&&void 0!==a?a:n.opacity,isTalking:e.isTalking}:n}));return s})))})),W>=Z&&(le(),N(!1),Y.current=!1,_.current=0))}),[W,Z,G,le]),(0,t.useEffect)((()=>()=>{clearTimeout(q.current),clearTimeout(D.current),window.cancelAnimationFrame(I.current)}),[]);const re=(e=>{let n="";return e.forEach((e=>{e.character&&e.dialogue&&e.startTime&&(n=n+"\n<strong>"+e.character+"</strong>: "+e.dialogue.text+"\n")})),n})(b);return t.createElement(l.fv,{lg:10,lgOffset:1,md:10,mdOffset:1},t.createElement("div",{className:"scene-wrapper",style:{backgroundImage:`url("${d}/${H}")`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",aspectRatio:"16 / 9"}},M?t.createElement(t.Fragment,null,A.map(((e,n)=>{let{character:a,position:l={},opacity:o=1,isTalking:r=!1}=e;return t.createElement(V,{key:n,name:a,position:l,opacity:o,isTalking:T&&r,sceneSubject:s})})),(f||S)&&t.createElement("div",{className:"scene-dialogue-wrap "+(L.align?`scene-dialogue-align-${L.align}`:"")},t.createElement("div",{className:"scene-dialogue-label"},L.label),t.createElement("div",{className:"scene-dialogue-text",dangerouslySetInnerHTML:{__html:L.text}}))):t.createElement(u.aH,null)),t.createElement("div",{className:"scene-controls"},t.createElement("button",{className:"scene-btn scene-play-btn",onClick:()=>s.notify(T?"pause":"play")},T?t.createElement(t.Fragment,null,t.createElement("span",{className:"sr-only"},p("buttons.pause")),t.createElement(o.g,{icon:r.M6O,size:"3x"})):t.createElement(t.Fragment,null,t.createElement("span",{className:"sr-only"},p("buttons.play")),t.createElement(o.g,{icon:r.qtl,size:"3x"}))),f?t.createElement("div",{className:"scene-a11y-btn"}):t.createElement("button",{className:"scene-btn scene-a11y-btn","aria-label":p("buttons.closed-caption"),"aria-pressed":S,onClick:()=>j(!S)},t.createElement(m,{fill:S?"var(--tertiary-color)":"var(--gray-45)"}))),t.createElement(i.A,{transcript:re,isDialogue:!0}),t.createElement(l.hK,{size:"m"}))}se.displayName="Scene";var ae=se}}]);
//# sourceMappingURL=493de811006be8decb93ca712e53b7ee8ed7d874-f8cb237395ea84585a1d.js.map